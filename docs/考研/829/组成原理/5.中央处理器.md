---
alias: 计组-cpu
tag:
- 考研
- 829
- 计组
date: 2022年05月22日
---
![[大纲#中央处理器]]
## 功能
1. 指令控制
2. 操作控制
3. 时间控制
4. 数据加工
5. 中断处理
## 结构
### 运算器
数据加工
#### 部件
1. **算数逻辑单元**(ALU)
2. **通用寄存器组**，如AX、BX、SP(堆栈指针)等，可通过汇编改变值
3. **累加寄存器**(ACC)，暂时存放ALU的运算结果
4. **暂存寄存器**，暂存主存中读取的数据，对*用户透明(无法改变)*
5. **程序状态字寄存器**(PSW)，记录如溢出(OP)、符号(SF)、零(ZF)、进位(CF)等标志状态，条件转移时需要读取，`CMP`等指令可以改变值
6. **移位器、计数器**
### 控制器
取指、分析、执行、中断处理
#### 部件
1. **程序计数器**(PC)，下一条指令的存放地址，`JMP`可以改变值
2. **指令寄存器**(IR)，存放当前执行的指令，对*用户透明(无法改变)*
3. **指令译码器**(ID)，仅对**操作码**进行译码，向控制器提供特定的操作信号
4. **存储器地址寄存器**(MAR)，存放要访问的主存单元的**地址**，对*用户透明(无法改变)*
5. **存储器数据寄存器**(MDR)，存放需要写入或者读出的**数据**，对*用户透明(无法改变)*
6. **时序系统**，通过统一时钟(CLOCK)分频产生**时序信号**
7. **微操作信号发生器**，根据指令、PSW的内容、时序信号产生各种控制信号，有组合逻辑型和存储逻辑型两种
## 指令执行过程
### 指令周期
从主存中取出并执行一条指令的事件
取指周期+间址周期+执行周期+中断周期
![[Pasted image 20220619145438.png]]
#### 触发器
FE(取指)、IND(间指)、EX(执行)、INT(中断)
当处于某一周期时，该触发器置1，其余置0
### 数据流
#### 取指
根据PC中的内容从主存中取出指令代码并存放在IR中，同时PC+1
1. PC -①-> MAR -②-> 地址总线 -③-> 主存
2. CU发出读命令 -④-> 控制总线 -⑤-> 主存
3. 主存 -⑥-> 数据总线 -⑦-> MDR -⑧-> IR(存放指令)
4. CU发出控制信号 -⑨-> PC内容加1
![[Pasted image 20220619151703.png]]
#### 间址
取操作数有效地址，将指令中的地址码送到MAR并送至地址总线，此后CU向存储器发读命令，以获取有效地址并存至MDR
1. Ad(IR)或MDR -①-> MAR -②-> 地址总线 -③-> 主存
2. CU发出读命令 -④-> 控制总线 -⑤-> 主存
3. 主存 -⑥-> 数据总线 -⑦-> MDR(存放有效地址)
![[Pasted image 20220619153029.png]]
#### 执行
取操作数，并根据IR中的指令字的操作码通过ALU操作产生执行结果
#### 中断
处理中断请求，将程序断点存入堆栈中，并用SP指示栈顶地址，而且进栈操作是先修改栈顶指针，后存入数据
1. CU控制将SP减1，SP -①-> MAR -②-> 地址总线 -③-> 主存
2. CU发出写命令 -④-> 控制总线 -⑤-> 主存
3. PC -⑥-> MDR -⑦-> 数据总线 -⑧-> 主存(程序断点存入主存)
4. CU(中断服务程序的入口地址) -⑨-> PC
![[Pasted image 20220619152905.png]]
